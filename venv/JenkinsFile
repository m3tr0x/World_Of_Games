pipeline {
  agent any
	stages {
		stage('build') {
		  steps {
			echo 'Building test environment'
			sh 'cd C:\\Users\\aviv0\\PycharmProjects\\World_Of_Games2\\venv'
			sh 'docker-machine start'
			sh 'docker-compose up'
			echo 'Finished Building test environment'
		  }
		}
		stage ("wait_prior_starting_e2e_testing") {
			steps {
			echo 'Waiting 5 minutes for deployment to complete prior start testing'
			sleep 300 // seconds
			}
		}
		stage('Test') {
		  steps {
			echo 'Starting the Test'
			sh 'cd C:\\Users\\aviv0\\PycharmProjects\\World_Of_Games2\\venv\\tests'
			sh 'python e2e.py'
			}
		}
		stage('Shutdown') {
		  steps {
			echo 'shutting down testing environment'
			sh 'cd C:\\Users\\aviv0\\PycharmProjects\\World_Of_Games2\\venv'
			sh 'docker-machine stop'
			}
		}
	}
}
